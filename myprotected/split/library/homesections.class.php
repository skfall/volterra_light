<?php	/*	KLYCHA WEB TECHNOLOGIES	*/	/*	***************************	*/	/*	Author: Sivkovich Maxim		*/	/*	***************************	*/	/*	Developed: from 2013		*/	/*	***************************	*/		// Settings class	require("BasicHelp.php");class homesectionsHelp extends BasicHelp{		public $dbh;		public $table;	public $id;	public $item;		public function __construct($dbh)	{		parent::__construct($dbh);		$this->dbh = $dbh;	} 		// Get All Langs	public function getAllLangs(){		$q = "			SELECT * FROM [pre]languages WHERE `used` = 0 LIMIT 1000 		";		return $this->rs($q);	}		// Get Available Langs	public function getAvailableLangs(){			$query = "				SELECT L.name, L.alias, M.block, M.id 				FROM [pre]site_languages AS M 				LEFT JOIN [pre]languages AS L ON L.id = M.lang_id 				WHERE 1 $filter_and AND L.alias != '".DEF_LANG."'				ORDER BY M.id				LIMIT 1000			";								return $this->rs($query);	}		// Get Section item	public function getHomeSectionItem($tablename, $lpx="", $lang_fields=array())	{		$result = ['cardItem'=>[], 'menuInfo'=>[]];				$query = "			SELECT M.*			FROM [pre]home_sections_ref as R 			LEFT JOIN [pre]menu_home AS M ON M.id = R.section_id 			WHERE 				R.table_name='$tablename' 			LIMIT 1		";		$result['menuInfo'] = $this->rs($query,1);						$langFields = "";		$lang_prefix = ($lpx ? $lpx."_" : "");				foreach($lang_fields as $field)		{			$langFields .= ", M.".$lang_prefix.$field." as ".$field." ";		}				$query = "			SELECT M.* $langFields  			FROM `$tablename` as M 			WHERE 				`id`='1' 			LIMIT 1		";		$result['cardItem'] = $this->rs($query,1);				// echo "<pre>"; print_r($query); echo "</pre>";				return $result;	}					// Get Home Why Us item	public function getHomeWhyUsItem($id)	{		$query = "SELECT M.* FROM [pre]home_why_us_items as M WHERE `id`='$id' LIMIT 1";		$resultMassive = $this->rs($query);				$result = ($resultMassive ? $resultMassive[0] : array());				return $result;	}	// Get all Home Why Us Items	public function getHomeWhyUs($params=array(),$typeCount=false)	{		// Filter params				$filter_and = "";				if(isset($params['filtr']['massive']))		{			foreach($params['filtr']['massive'] as $f_name => $f_value)			{				if($f_value < 0) continue;				$filter_and .= " AND ($f_name='$f_value') ";			}		}				// Filter like				if(isset($params['filtr']['filtr_search_key']) && isset($params['filtr']['filtr_search_field']) && trim($params['filtr']['filtr_search_key']) != "")		{			$search_field = $params['filtr']['filtr_search_field'];			$search_key = $params['filtr']['filtr_search_key'];						$filter_and .= " AND ($search_field LIKE '%$search_key%') ";		}				// Filter sort				$sort_field		= (isset($params['filtr']['sort_filtr']) ? $params['filtr']['sort_filtr'] : "M.id");				$sort_vector	= (isset($params['filtr']['order_filtr']) ? $params['filtr']['order_filtr'] : "");				// Order limits				$limit = (isset($_COOKIE['global_on_page']) ? (int)$_COOKIE['global_on_page'] : GLOBAL_ON_PAGE);				if($limit <= 0) $limit = GLOBAL_ON_PAGE;				$start = (isset($params['start']) ? ($params['start']-1)*$limit : 0);				if(!$typeCount)		{					$query = "SELECT M.*							FROM [pre]home_why_us_items as M  										WHERE 1 $filter_and 					ORDER BY $sort_field $sort_vector 					LIMIT $start,$limit";								return $this->rs($query);					}else		{			$query = "SELECT COUNT(*)  							FROM [pre]home_why_us_items as M  										WHERE 1 $filter_and 										LIMIT 100000";								$result = $this->rs($query);			return $result[0]['COUNT(*)'];		}	}	public function getTHbanner(){		$q = "SELECT M.* FROM `osc_th_banner` AS M WHERE M.id = 1 LIMIT 1";		$result = $this->rs($q, 1);		return $result;	}	public function getTHabout(){		$q = "SELECT M.* FROM `osc_th_about` AS M WHERE M.id = 1 LIMIT 1";		$result = $this->rs($q, 1);		return $result;	}	public function getTHreasonsItem($id)	{		$query = "SELECT M.* FROM [pre]th_reasons as M WHERE `id`='$id' LIMIT 1";		$resultMassive = $this->rs($query);				$result = ($resultMassive ? $resultMassive[0] : array());				return $result;	}	// Get all articles		public function getTHreasons($params=array(),$typeCount=false)	{		// Filter params				$filter_and = "";				if(isset($params['filtr']['massive']))		{			foreach($params['filtr']['massive'] as $f_name => $f_value)			{				if($f_value < 0) continue;				$filter_and .= " AND ($f_name='$f_value') ";			}		}				// Filter like				if(isset($params['filtr']['filtr_search_key']) && isset($params['filtr']['filtr_search_field']) && trim($params['filtr']['filtr_search_key']) != "")		{			$search_field = $params['filtr']['filtr_search_field'];			$search_key = $params['filtr']['filtr_search_key'];						$filter_and .= " AND ($search_field LIKE '%$search_key%') ";		}				// Filter sort				$sort_field		= (isset($params['filtr']['sort_filtr']) ? $params['filtr']['sort_filtr'] : "M.id");				$sort_vector	= (isset($params['filtr']['order_filtr']) ? $params['filtr']['order_filtr'] : "");				// Order limits				$limit = (isset($_COOKIE['global_on_page']) ? (int)$_COOKIE['global_on_page'] : GLOBAL_ON_PAGE);				if($limit <= 0) $limit = GLOBAL_ON_PAGE;				$start = (isset($params['start']) ? ($params['start']-1)*$limit : 0);				if(!$typeCount)		{					$query = "SELECT M.* 							FROM [pre]th_reasons as M  										WHERE 1 $filter_and 					ORDER BY $sort_field $sort_vector 					LIMIT $start,$limit";								return $this->rs($query);					}else		{			$query = "SELECT COUNT(*)  							FROM [pre]th_reasons as M  										WHERE 1 $filter_and 										LIMIT 100000";								$result = $this->rs($query);			return $result[0]['COUNT(*)'];		}	}	// Get Home Why Us item	public function getTHequipPage(){		$query = "SELECT M.* FROM osc_th_equip as M WHERE `id`=1 LIMIT 1";		$resultMassive = $this->rs($query);				$result = ($resultMassive ? $resultMassive[0] : array());				return $result;	}	public function getTHequipItem($id)	{		$query = "SELECT M.* FROM [pre]th_equip_items as M WHERE `id`='$id' LIMIT 1";		$resultMassive = $this->rs($query);				$result = ($resultMassive ? $resultMassive[0] : array());				return $result;	}	// Get all Home Why Us Items	public function getTHequip($params=array(),$typeCount=false)	{		// Filter params				$filter_and = "";				if(isset($params['filtr']['massive']))		{			foreach($params['filtr']['massive'] as $f_name => $f_value)			{				if($f_value < 0) continue;				$filter_and .= " AND ($f_name='$f_value') ";			}		}				// Filter like				if(isset($params['filtr']['filtr_search_key']) && isset($params['filtr']['filtr_search_field']) && trim($params['filtr']['filtr_search_key']) != "")		{			$search_field = $params['filtr']['filtr_search_field'];			$search_key = $params['filtr']['filtr_search_key'];						$filter_and .= " AND ($search_field LIKE '%$search_key%') ";		}				// Filter sort				$sort_field		= (isset($params['filtr']['sort_filtr']) ? $params['filtr']['sort_filtr'] : "M.id");				$sort_vector	= (isset($params['filtr']['order_filtr']) ? $params['filtr']['order_filtr'] : "");				// Order limits				$limit = (isset($_COOKIE['global_on_page']) ? (int)$_COOKIE['global_on_page'] : GLOBAL_ON_PAGE);				if($limit <= 0) $limit = GLOBAL_ON_PAGE;				$start = (isset($params['start']) ? ($params['start']-1)*$limit : 0);				if(!$typeCount)		{					$query = "SELECT M.*							FROM [pre]th_equip_items as M  										WHERE 1 $filter_and 					ORDER BY $sort_field $sort_vector 					LIMIT $start,$limit";								return $this->rs($query);					}else		{			$query = "SELECT COUNT(*)  							FROM [pre]th_equip_items as M  										WHERE 1 $filter_and 										LIMIT 100000";								$result = $this->rs($query);			return $result[0]['COUNT(*)'];		}	}	public function getCTbanner(){		$q = "SELECT M.* FROM `osc_ct_banner` AS M WHERE M.id = 1 LIMIT 1";		$result = $this->rs($q, 1);		return $result;	}	public function getCTreasonsItem($id)	{		$query = "SELECT M.* FROM [pre]ct_reasons as M WHERE `id`='$id' LIMIT 1";		$resultMassive = $this->rs($query);				$result = ($resultMassive ? $resultMassive[0] : array());				return $result;	}	// Get all articles		public function getCTreasons($params=array(),$typeCount=false)	{		// Filter params				$filter_and = "";				if(isset($params['filtr']['massive']))		{			foreach($params['filtr']['massive'] as $f_name => $f_value)			{				if($f_value < 0) continue;				$filter_and .= " AND ($f_name='$f_value') ";			}		}				// Filter like				if(isset($params['filtr']['filtr_search_key']) && isset($params['filtr']['filtr_search_field']) && trim($params['filtr']['filtr_search_key']) != "")		{			$search_field = $params['filtr']['filtr_search_field'];			$search_key = $params['filtr']['filtr_search_key'];						$filter_and .= " AND ($search_field LIKE '%$search_key%') ";		}				// Filter sort				$sort_field		= (isset($params['filtr']['sort_filtr']) ? $params['filtr']['sort_filtr'] : "M.id");				$sort_vector	= (isset($params['filtr']['order_filtr']) ? $params['filtr']['order_filtr'] : "");				// Order limits				$limit = (isset($_COOKIE['global_on_page']) ? (int)$_COOKIE['global_on_page'] : GLOBAL_ON_PAGE);				if($limit <= 0) $limit = GLOBAL_ON_PAGE;				$start = (isset($params['start']) ? ($params['start']-1)*$limit : 0);				if(!$typeCount)		{					$query = "SELECT M.* 							FROM [pre]ct_reasons as M  										WHERE 1 $filter_and 					ORDER BY $sort_field $sort_vector 					LIMIT $start,$limit";								return $this->rs($query);					}else		{			$query = "SELECT COUNT(*)  							FROM [pre]ct_reasons as M  										WHERE 1 $filter_and 										LIMIT 100000";								$result = $this->rs($query);			return $result[0]['COUNT(*)'];		}	}	// Get Home Why Us item	public function getCTequipPage(){		$query = "SELECT M.* FROM osc_ct_equip as M WHERE `id`=1 LIMIT 1";		$resultMassive = $this->rs($query);				$result = ($resultMassive ? $resultMassive[0] : array());				return $result;	}	public function getCTequipItem($id)	{		$query = "SELECT M.* FROM [pre]ct_equip_items as M WHERE `id`='$id' LIMIT 1";		$resultMassive = $this->rs($query);				$result = ($resultMassive ? $resultMassive[0] : array());				return $result;	}	// Get all Home Why Us Items	public function getCTequip($params=array(),$typeCount=false)	{		// Filter params				$filter_and = "";				if(isset($params['filtr']['massive']))		{			foreach($params['filtr']['massive'] as $f_name => $f_value)			{				if($f_value < 0) continue;				$filter_and .= " AND ($f_name='$f_value') ";			}		}				// Filter like				if(isset($params['filtr']['filtr_search_key']) && isset($params['filtr']['filtr_search_field']) && trim($params['filtr']['filtr_search_key']) != "")		{			$search_field = $params['filtr']['filtr_search_field'];			$search_key = $params['filtr']['filtr_search_key'];						$filter_and .= " AND ($search_field LIKE '%$search_key%') ";		}				// Filter sort				$sort_field		= (isset($params['filtr']['sort_filtr']) ? $params['filtr']['sort_filtr'] : "M.id");				$sort_vector	= (isset($params['filtr']['order_filtr']) ? $params['filtr']['order_filtr'] : "");				// Order limits				$limit = (isset($_COOKIE['global_on_page']) ? (int)$_COOKIE['global_on_page'] : GLOBAL_ON_PAGE);				if($limit <= 0) $limit = GLOBAL_ON_PAGE;				$start = (isset($params['start']) ? ($params['start']-1)*$limit : 0);				if(!$typeCount)		{					$query = "SELECT M.*							FROM [pre]ct_equip_items as M  										WHERE 1 $filter_and 					ORDER BY $sort_field $sort_vector 					LIMIT $start,$limit";								return $this->rs($query);					}else		{			$query = "SELECT COUNT(*)  							FROM [pre]ct_equip_items as M  										WHERE 1 $filter_and 										LIMIT 100000";								$result = $this->rs($query);			return $result[0]['COUNT(*)'];		}	}		public function getCTGenplan(){		$q = "			SELECT 				M.*,				(SELECT `name` FROM `osc_ct_genplan_statuses` WHERE `id` = M.status LIMIT 1) as status_name 			FROM `osc_ct_genplan` AS M			LIMIT 50		";		return $this->rs($q);	}	public function getMeta($alias){		$q = "SELECT M.* FROM `osc_meta_table` AS M WHERE M.alias = '$alias' LIMIT 1";		return $this->rs($q)[0];	}	public function getHomeBanner(){		$q = "SELECT M.* FROM `osc_home_banner` AS M WHERE M.id = 1 LIMIT 1";		$result = $this->rs($q, 1);		return $result;	}	public function getHomeBannerItems(){		$q = "SELECT M.id, M.file FROM `osc_home_banner_items` AS M ORDER BY M.id LIMIT 50";		return $this->rs($q);	}	public function getHomeStandarts(){		$q = "SELECT M.* FROM `osc_home_standarts` AS M WHERE M.id = 1 LIMIT 1";		$result = $this->rs($q, 1);		return $result;	}	public function getHQSection(){		$q = "SELECT M.* FROM `osc_home_quality` AS M WHERE M.id = 1 LIMIT 1";		$result = $this->rs($q, 1);		return $result;	}	// Get Home Why Us item		public function getHQSItem($id)		{			$query = "				SELECT 					M.* 				FROM [pre]home_quality_items as M 				WHERE `id`='$id' 				LIMIT 1			";			$resultMassive = $this->rs($query);						$result = ($resultMassive ? $resultMassive[0] : array());						return $result;		}	// Get all Home Why Us Items	public function getHQSectionItems($params=array(),$typeCount=false)	{		// Filter params				$filter_and = "";				if(isset($params['filtr']['massive']))		{			foreach($params['filtr']['massive'] as $f_name => $f_value)			{				if($f_value < 0) continue;				$filter_and .= " AND ($f_name='$f_value') ";			}		}				// Filter like				if(isset($params['filtr']['filtr_search_key']) && isset($params['filtr']['filtr_search_field']) && trim($params['filtr']['filtr_search_key']) != "")		{			$search_field = $params['filtr']['filtr_search_field'];			$search_key = $params['filtr']['filtr_search_key'];						$filter_and .= " AND ($search_field LIKE '%$search_key%') ";		}				// Filter sort				$sort_field		= (isset($params['filtr']['sort_filtr']) ? $params['filtr']['sort_filtr'] : "M.id");				$sort_vector	= (isset($params['filtr']['order_filtr']) ? $params['filtr']['order_filtr'] : "");				// Order limits				$limit = (isset($_COOKIE['global_on_page']) ? (int)$_COOKIE['global_on_page'] : GLOBAL_ON_PAGE);				if($limit <= 0) $limit = GLOBAL_ON_PAGE;				$start = (isset($params['start']) ? ($params['start']-1)*$limit : 0);				if(!$typeCount)		{					$query = "SELECT M.*							FROM [pre]home_quality_items as M  										WHERE 1 $filter_and 					ORDER BY $sort_field $sort_vector 					LIMIT $start,$limit";								return $this->rs($query);					}else		{			$query = "SELECT COUNT(*)  							FROM [pre]home_quality_items as M  										WHERE 1 $filter_and 										LIMIT 100000";								$result = $this->rs($query);			return $result[0]['COUNT(*)'];		}	}	public function getHMapSection(){		$q = "SELECT M.* FROM `osc_home_map` AS M WHERE M.id = 1 LIMIT 1";		$result = $this->rs($q, 1);		return $result;	}	// Get Home Why Us item		public function getHMapItem($id)		{			$query = "				SELECT 					M.* 				FROM [pre]home_map_items as M 				WHERE `id`='$id' 				LIMIT 1			";			$resultMassive = $this->rs($query);						$result = ($resultMassive ? $resultMassive[0] : array());						return $result;		}	// Get all Home Why Us Items	public function getHMapItems($params=array(),$typeCount=false)	{		// Filter params				$filter_and = "";				if(isset($params['filtr']['massive']))		{			foreach($params['filtr']['massive'] as $f_name => $f_value)			{				if($f_value < 0) continue;				$filter_and .= " AND ($f_name='$f_value') ";			}		}				// Filter like				if(isset($params['filtr']['filtr_search_key']) && isset($params['filtr']['filtr_search_field']) && trim($params['filtr']['filtr_search_key']) != "")		{			$search_field = $params['filtr']['filtr_search_field'];			$search_key = $params['filtr']['filtr_search_key'];						$filter_and .= " AND ($search_field LIKE '%$search_key%') ";		}				// Filter sort				$sort_field		= (isset($params['filtr']['sort_filtr']) ? $params['filtr']['sort_filtr'] : "M.id");				$sort_vector	= (isset($params['filtr']['order_filtr']) ? $params['filtr']['order_filtr'] : "");				// Order limits				$limit = (isset($_COOKIE['global_on_page']) ? (int)$_COOKIE['global_on_page'] : GLOBAL_ON_PAGE);				if($limit <= 0) $limit = GLOBAL_ON_PAGE;				$start = (isset($params['start']) ? ($params['start']-1)*$limit : 0);				if(!$typeCount)		{					$query = "SELECT M.*							FROM [pre]home_map_items as M  										WHERE 1 $filter_and 					ORDER BY $sort_field $sort_vector 					LIMIT $start,$limit";								return $this->rs($query);					}else		{			$query = "SELECT COUNT(*)  							FROM [pre]home_map_items as M  										WHERE 1 $filter_and 										LIMIT 100000";								$result = $this->rs($query);			return $result[0]['COUNT(*)'];		}	}	public function getCTgalleryPage(){		$query = "SELECT M.* FROM osc_ct_gallery as M WHERE `id`=1 LIMIT 1";		$resultMassive = $this->rs($query);				$result = ($resultMassive ? $resultMassive[0] : array());				return $result;	}	public function getCTgalleryItem($id)	{		$query = "SELECT M.* FROM [pre]ct_gallery_items as M WHERE `id`='$id' LIMIT 1";		$resultMassive = $this->rs($query);				$result = ($resultMassive ? $resultMassive[0] : array());				return $result;	}	// Get all Home Why Us Items	public function getCTgallery($params=array(),$typeCount=false)	{		// Filter params				$filter_and = "";				if(isset($params['filtr']['massive']))		{			foreach($params['filtr']['massive'] as $f_name => $f_value)			{				if($f_value < 0) continue;				$filter_and .= " AND ($f_name='$f_value') ";			}		}				// Filter like				if(isset($params['filtr']['filtr_search_key']) && isset($params['filtr']['filtr_search_field']) && trim($params['filtr']['filtr_search_key']) != "")		{			$search_field = $params['filtr']['filtr_search_field'];			$search_key = $params['filtr']['filtr_search_key'];						$filter_and .= " AND ($search_field LIKE '%$search_key%') ";		}				// Filter sort				$sort_field		= (isset($params['filtr']['sort_filtr']) ? $params['filtr']['sort_filtr'] : "M.id");				$sort_vector	= (isset($params['filtr']['order_filtr']) ? $params['filtr']['order_filtr'] : "");				// Order limits				$limit = (isset($_COOKIE['global_on_page']) ? (int)$_COOKIE['global_on_page'] : GLOBAL_ON_PAGE);				if($limit <= 0) $limit = GLOBAL_ON_PAGE;				$start = (isset($params['start']) ? ($params['start']-1)*$limit : 0);				if(!$typeCount)		{					$query = "SELECT M.*							FROM [pre]ct_gallery_items as M  										WHERE 1 $filter_and 					ORDER BY $sort_field $sort_vector 					LIMIT $start,$limit";								return $this->rs($query);					}else		{			$query = "SELECT COUNT(*)  							FROM [pre]ct_gallery_items as M  										WHERE 1 $filter_and 										LIMIT 100000";								$result = $this->rs($query);			return $result[0]['COUNT(*)'];		}	}	public function getTHgalleryPage(){		$query = "SELECT M.* FROM osc_th_gallery as M WHERE `id`=1 LIMIT 1";		$resultMassive = $this->rs($query);				$result = ($resultMassive ? $resultMassive[0] : array());				return $result;	}	public function getTHgalleryItem($id)	{		$query = "SELECT M.* FROM [pre]th_gallery_items as M WHERE `id`='$id' LIMIT 1";		$resultMassive = $this->rs($query);				$result = ($resultMassive ? $resultMassive[0] : array());				return $result;	}	// Get all Home Why Us Items	public function getTHgallery($params=array(),$typeCount=false)	{		// Filter params				$filter_and = "";				if(isset($params['filtr']['massive']))		{			foreach($params['filtr']['massive'] as $f_name => $f_value)			{				if($f_value < 0) continue;				$filter_and .= " AND ($f_name='$f_value') ";			}		}				// Filter like				if(isset($params['filtr']['filtr_search_key']) && isset($params['filtr']['filtr_search_field']) && trim($params['filtr']['filtr_search_key']) != "")		{			$search_field = $params['filtr']['filtr_search_field'];			$search_key = $params['filtr']['filtr_search_key'];						$filter_and .= " AND ($search_field LIKE '%$search_key%') ";		}				// Filter sort				$sort_field		= (isset($params['filtr']['sort_filtr']) ? $params['filtr']['sort_filtr'] : "M.id");				$sort_vector	= (isset($params['filtr']['order_filtr']) ? $params['filtr']['order_filtr'] : "");				// Order limits				$limit = (isset($_COOKIE['global_on_page']) ? (int)$_COOKIE['global_on_page'] : GLOBAL_ON_PAGE);				if($limit <= 0) $limit = GLOBAL_ON_PAGE;				$start = (isset($params['start']) ? ($params['start']-1)*$limit : 0);				if(!$typeCount)		{					$query = "SELECT M.*							FROM [pre]th_gallery_items as M  										WHERE 1 $filter_and 					ORDER BY $sort_field $sort_vector 					LIMIT $start,$limit";								return $this->rs($query);					}else		{			$query = "SELECT COUNT(*)  							FROM [pre]th_gallery_items as M  										WHERE 1 $filter_and 										LIMIT 100000";								$result = $this->rs($query);			return $result[0]['COUNT(*)'];		}	}	public function getTHEquipNewPage(){		$query = "SELECT M.* FROM osc_th_equip_new as M WHERE `id`=1 LIMIT 1";		$resultMassive = $this->rs($query);				$result = ($resultMassive ? $resultMassive[0] : array());				return $result;	}	public function getTHEquipNewItem($id)	{		$query = "SELECT M.* FROM [pre]th_equip_items_new as M WHERE `id`='$id' LIMIT 1";		$resultMassive = $this->rs($query);				$result = ($resultMassive ? $resultMassive[0] : array());				return $result;	}	// Get all Home Why Us Items	public function getTHequip_new($params=array(),$typeCount=false)	{		// Filter params				$filter_and = "";				if(isset($params['filtr']['massive']))		{			foreach($params['filtr']['massive'] as $f_name => $f_value)			{				if($f_value < 0) continue;				$filter_and .= " AND ($f_name='$f_value') ";			}		}				// Filter like				if(isset($params['filtr']['filtr_search_key']) && isset($params['filtr']['filtr_search_field']) && trim($params['filtr']['filtr_search_key']) != "")		{			$search_field = $params['filtr']['filtr_search_field'];			$search_key = $params['filtr']['filtr_search_key'];						$filter_and .= " AND ($search_field LIKE '%$search_key%') ";		}				// Filter sort				$sort_field		= (isset($params['filtr']['sort_filtr']) ? $params['filtr']['sort_filtr'] : "M.id");				$sort_vector	= (isset($params['filtr']['order_filtr']) ? $params['filtr']['order_filtr'] : "");				// Order limits				$limit = (isset($_COOKIE['global_on_page']) ? (int)$_COOKIE['global_on_page'] : GLOBAL_ON_PAGE);				if($limit <= 0) $limit = GLOBAL_ON_PAGE;				$start = (isset($params['start']) ? ($params['start']-1)*$limit : 0);				if(!$typeCount)		{					$query = "SELECT M.*							FROM [pre]th_equip_items_new as M  										WHERE 1 $filter_and 					ORDER BY $sort_field $sort_vector 					LIMIT $start,$limit";								return $this->rs($query);					}else		{			$query = "SELECT COUNT(*)  							FROM [pre]th_equip_items_new as M  										WHERE 1 $filter_and 										LIMIT 100000";								$result = $this->rs($query);			return $result[0]['COUNT(*)'];		}	}		public function __destruct(){}}